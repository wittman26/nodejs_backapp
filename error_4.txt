package com.acelera.fx.db.infrastructure.adapter.persistence.jpa.model;

import com.acelera.data.jpa.BaseAuditorJpa;
import lombok.*;

import javax.persistence.*;
import javax.validation.constraints.Size;
import java.util.List;

@Entity
@Table(name = "FX_TRADE_SIGNATURE")
@NoArgsConstructor
@AllArgsConstructor
@Builder
@Setter
@Getter
public class TradeSignatureModel extends BaseAuditorJpa {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "TRADE_SIGNATURE_ID")
    private Long tradeSignatureId;

    @Size(max = 4)
    @Column(name = "ENTITY", nullable = false, length = 4)
    private String entity;

    @Column(name = "ORIGIN_ID", nullable = false)
    private Long originId;

    @Size(max = 20)
    @Column(name = "ORIGIN", nullable = false, length = 20)
    private String origin;

    @Size(max = 2)
    @Column(name = "PRODUCT_ID", nullable = false, length = 2)
    private String productId;

    @Size(max = 10)
    @Column(name = "SIGNATURE_TYPE", nullable = false, length = 10)
    private String signatureType;

    @Size(max = 1)
    @Column(name = "INDICATOR_SSCC", length = 1)
    private String indicatorSSCC;

    @Size(max = 10)
    @Column(name = "VALIDATED_BO", length = 10)
    private String validatedBo;

    @Column(name = "EXPEDIENT_ID")
    private Long expedientId;

    @OneToMany(mappedBy = "tradeSignatureModel", fetch = FetchType.LAZY, cascade = CascadeType.ALL, orphanRemoval = true)
    private List<TradeSignerModel> tradeSignerList;
}

package com.acelera.fx.db.infrastructure.adapter.persistence.jpa.model;

import com.acelera.data.jpa.BaseAuditorJpa;
import lombok.*;

import javax.persistence.*;
import javax.validation.constraints.Size;

@Entity
@Table(name = "FX_TRADE_SIGNER")
@NoArgsConstructor
@AllArgsConstructor
@Builder
@Setter
@Getter
public class TradeSignerModel extends BaseAuditorJpa {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "TRADE_SIGNER_ID")
    private Long tradeSignerId;

    @Size(max = 1)
    @Column(name = "DOCUMENT_TYPE", nullable = false, length = 1)
    private String documentType;

    @Size(max = 20)
    @Column(name = "DOCUMENT_NUMBER", nullable = false, length = 20)
    private String documentNumber;

    @Size(max = 10)
    @Column(name = "SIGNER_ID", nullable = false, length = 10)
    private String signerId;

    @Size(max = 200)
    @Column(name = "NAME", nullable = false, length = 200)
    private String name;

    @Size(max = 1)
    @Column(name = "IS_CLIENT", nullable = false, length = 1)
    private String isClient;

    @Size(max = 2)
    @Column(name = "INTERVENTION_TYPE", nullable = false, length = 2)
    private String interventionType;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "TRADE_SIGNATURE_ID", referencedColumnName = "TRADE_SIGNATURE_ID")
    private TradeSignatureModel tradeSignatureModel;
}

@Repository
@RequiredArgsConstructor
public class JpaTradeSignatureRepositoryImpl implements TradeSignatureRepository {

    private final SpringJpaTradeSignatureRepository repository;

    @Override
    public TradeSignature save(TradeSignature tradeSignature) {
        TradeSignatureModel tradeSignatureModel = TradeSignatureMapper.INSTANCE.fromDomain(tradeSignature);

        if(tradeSignatureModel.getTradeSignerList()!= null) {
            tradeSignatureModel.getTradeSignerList()
                    .forEach(signer -> signer.setTradeSignatureModel(tradeSignatureModel));
        }

        var model = repository.save(tradeSignatureModel);
        return TradeSignatureMapper.INSTANCE.toDomain(model);
    }

    @Override
    public Optional<TradeSignature> find(TradeSignatureFindRequest request) {
        Optional<TradeSignatureModel> model;
        if(request.getTradeSignatureId() != null) {
             model = repository.findById(request.getTradeSignatureId());
        } else {
            model = repository.find(request);
        }
        return model.map(TradeSignatureMapper.INSTANCE::toDomain);
    }
}

public interface SpringJpaTradeSignatureRepository extends CrudRepository<TradeSignatureModel, Long> {
    // @formatter:off
    @Query(nativeQuery = true, value = "SELECT * "
            + "FROM ACELER_FX.FX_TRADE_SIGNATURE "
            + "WHERE "
            + "(:#{#filter.entity} IS NULL OR ENTITY = :#{#filter.entity}) AND "
            + "(:#{#filter.originId} IS NULL OR ORIGIN_ID = :#{#filter.originId}) AND "
            + "(:#{#filter.productId} IS NULL OR PRODUCT_ID = :#{#filter.productId})"
    )
    // @formatter:on
            Optional<TradeSignatureModel> find(TradeSignatureFindRequest filter);

    @EntityGraph(attributePaths = "tradeSignerList")
    @NotNull Optional<TradeSignatureModel> findById(@NotNull Long id);
}

//////////////////

Mis datos en BD

-------------------

    SELECT
        * 
    FROM
        ACELER_FX.FX_TRADE_SIGNATURE      
    WHERE
        (
            '0049' IS NULL OR ENTITY = '0049'
        ) 
        AND      (
            123450 IS NULL OR ORIGIN_ID = 123450
        ) 
        AND      (
            'AW' IS NULL OR PRODUCT_ID = 'AW'
        )  

TRADE_SIGNATURE_ID ENTI  ORIGIN_ID ORIGIN               PR SIGNATURE_ I VALIDATED_ EXPEDIENT_ID FECALTA                     USUALTA                        FECMODI                     USUMODI                       
------------------ ---- ---------- -------------------- -- ---------- - ---------- ------------ --------------------------- ------------------------------ --------------------------- ------------------------------
                32 0049     123450 TRADE                AW DIGITAL    N PENDING                 30/05/25 12:09:42,867158000 uid:n11111                     30/05/25 12:17:48,415170000 uid:n11111                 

SELECT
        * 
    FROM
        ACELER_FX.FX_TRADE_SIGNER
    WHERE TRADE_SIGNATURE_ID IN (
    SELECT
        TRADE_SIGNATURE_ID
    FROM
        ACELER_FX.FX_TRADE_SIGNATURE      
    WHERE
        (
            '0049' IS NULL OR ENTITY = '0049'
        ) 
        AND      (
            123450 IS NULL OR ORIGIN_ID = 123450
        ) 
        AND      (
            'AW' IS NULL OR PRODUCT_ID = 'AW'
        )     
    )

TRADE_SIGNER_ID TRADE_SIGNATURE_ID D DOCUMENT_NUMBER      SIGNER_ID  NAME                                                                                                                                                                                                     I IN FECALTA                     USUALTA                        FECMODI                     USUMODI                       
--------------- ------------------ - -------------------- ---------- -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- - -- --------------------------- ------------------------------ --------------------------- ------------------------------
             32                 32 N 12345678R            F000000583 RMV VALORES OLC SAN CLIENTE NO SPB                                                                                                                                                                       Y 01 30/05/25 12:09:43,011980000 uid:n11111                     30/05/25 12:09:43,011980000 uid:n11111                    
             37                 32 N 12345678R            F000000583 RMV VALORES OLC SAN CLIENTE NO SPB                                                                                                                                                                       Y 01 30/05/25 12:16:39,557219000 uid:n11111                     30/05/25 12:16:39,557219000 uid:n11111                    
             38                 32 N 12345999R            F000000999 RMV VALORES - ALANA GUTIERREZ                                                                                                                                                                            Y 01 30/05/25 12:16:39,640830000 uid:n11111                     30/05/25 12:16:39,640830000 uid:n11111                    
             34                 32 N 12345678R            F000000583 RMV VALORES OLC SAN CLIENTE NO SPB                                                                                                                                                                       Y 01 30/05/25 12:13:59,420304000 uid:n11111                     30/05/25 12:13:59,420304000 uid:n11111                    
             35                 32 N 12345678R            F000000583 RMV VALORES OLC SAN CLIENTE NO SPB                                                                                                                                                                       Y 01 30/05/25 12:15:25,480072000 uid:n11111                     30/05/25 12:15:25,480072000 uid:n11111                    
             36                 32 N 12345999R            F000000999 RMV VALORES DE ALANA                                                                                                                                                                                     Y 01 30/05/25 12:15:25,553236000 uid:n11111                     30/05/25 12:15:25,553236000 uid:n11111                    
             39                 32 N 12345678R            F000000583 RMV VALORES OLC SAN CLIENTE NO SPB                                                                                                                                                                       Y 01 30/05/25 12:17:48,237764000 uid:n11111                     30/05/25 12:17:48,237764000 uid:n11111                    
             40                 32 N 12345999R            F000000999 RMV VALORES - ALANA GUTIERREZ                                                                                                                                                                            Y 01 30/05/25 12:17:48,332940000 uid:n11111                     30/05/25 12:17:48,332940000 uid:n11111                    

8 filas seleccionadas. 

/////////////////

Frame => Stream ID: 0 Type: KEEPALIVE Flags: 0b0 Length: 14
Data:

2025-05-30 15:01:09.595 DEBUG [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] org.hibernate.SQL                        : 
    SELECT
        * 
    FROM
        ACELER_FX.FX_TRADE_SIGNATURE      
    WHERE
        (
            ? IS NULL 
            OR ENTITY = ?
        ) 
        AND      (
            ? IS NULL 
            OR ORIGIN_ID = ?
        ) 
        AND      (
            ? IS NULL 
            OR PRODUCT_ID = ?
        )
2025-05-30 15:01:09.644 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [0049]
2025-05-30 15:01:09.644 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicBinder      : binding parameter [2] as [VARCHAR] - [0049]
2025-05-30 15:01:09.644 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicBinder      : binding parameter [3] as [INTEGER] - [123450]
2025-05-30 15:01:09.644 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicBinder      : binding parameter [4] as [INTEGER] - [123450]
2025-05-30 15:01:09.644 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicBinder      : binding parameter [5] as [VARCHAR] - [FW]
2025-05-30 15:01:09.644 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicBinder      : binding parameter [6] as [VARCHAR] - [FW]
2025-05-30 15:01:09.693 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([trade_signature_id] : [BIGINT]) - [26]
2025-05-30 15:01:09.693 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([fecalta] : [TIMESTAMP]) - [2025-05-30T10:16:20.065928]
2025-05-30 15:01:09.693 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([fecmodi] : [TIMESTAMP]) - [2025-05-30T10:16:20.065928]
2025-05-30 15:01:09.693 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([usualta] : [VARCHAR]) - [uid:n11111]
2025-05-30 15:01:09.693 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([usumodi] : [VARCHAR]) - [uid:n11111]
2025-05-30 15:01:09.693 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([entity] : [VARCHAR]) - [0049]
2025-05-30 15:01:09.693 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([expedient_id] : [BIGINT]) - [null]
2025-05-30 15:01:09.694 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([indicator_sscc] : [VARCHAR]) - [N]
2025-05-30 15:01:09.694 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([origin] : [VARCHAR]) - [TRADE]
2025-05-30 15:01:09.694 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([origin_id] : [BIGINT]) - [123450]
2025-05-30 15:01:09.694 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([product_id] : [VARCHAR]) - [FW]
2025-05-30 15:01:09.694 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([signature_type] : [VARCHAR]) - [DIGITAL]
2025-05-30 15:01:09.694 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([validated_bo] : [VARCHAR]) - [null]
2025-05-30 15:01:09.694 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([trade_signature_id] : [BIGINT]) - [28]
2025-05-30 15:01:09.694 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([fecalta] : [TIMESTAMP]) - [2025-05-30T10:46:30.321784]
2025-05-30 15:01:09.694 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([fecmodi] : [TIMESTAMP]) - [2025-05-30T10:46:30.321784]
2025-05-30 15:01:09.694 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([usualta] : [VARCHAR]) - [uid:n11111]
2025-05-30 15:01:09.695 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([usumodi] : [VARCHAR]) - [uid:n11111]
2025-05-30 15:01:09.695 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([entity] : [VARCHAR]) - [0049]
2025-05-30 15:01:09.695 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([expedient_id] : [BIGINT]) - [null]
2025-05-30 15:01:09.695 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([indicator_sscc] : [VARCHAR]) - [N]
2025-05-30 15:01:09.695 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([origin] : [VARCHAR]) - [TRADE]
2025-05-30 15:01:09.695 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([origin_id] : [BIGINT]) - [123450]
2025-05-30 15:01:09.695 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([product_id] : [VARCHAR]) - [FW]
2025-05-30 15:01:09.695 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([signature_type] : [VARCHAR]) - [DIGITAL]
2025-05-30 15:01:09.695 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([validated_bo] : [VARCHAR]) - [null]
2025-05-30 15:01:09.695 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([trade_signature_id] : [BIGINT]) - [30]
2025-05-30 15:01:09.695 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([fecalta] : [TIMESTAMP]) - [2025-05-30T10:53:26.611907]
2025-05-30 15:01:09.695 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([fecmodi] : [TIMESTAMP]) - [2025-05-30T10:53:26.611907]
2025-05-30 15:01:09.696 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([usualta] : [VARCHAR]) - [uid:n11111]
2025-05-30 15:01:09.696 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([usumodi] : [VARCHAR]) - [uid:n11111]
2025-05-30 15:01:09.696 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([entity] : [VARCHAR]) - [0049]
2025-05-30 15:01:09.696 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([expedient_id] : [BIGINT]) - [null]
2025-05-30 15:01:09.696 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([indicator_sscc] : [VARCHAR]) - [N]
2025-05-30 15:01:09.696 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([origin] : [VARCHAR]) - [TRADE]
2025-05-30 15:01:09.696 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([origin_id] : [BIGINT]) - [123450]
2025-05-30 15:01:09.696 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([product_id] : [VARCHAR]) - [FW]
2025-05-30 15:01:09.696 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([signature_type] : [VARCHAR]) - [DIGITAL]
2025-05-30 15:01:09.696 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([validated_bo] : [VARCHAR]) - [null]
2025-05-30 15:01:09.696 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([trade_signature_id] : [BIGINT]) - [27]
2025-05-30 15:01:09.696 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([fecalta] : [TIMESTAMP]) - [2025-05-30T10:18:13.678948]
2025-05-30 15:01:09.696 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([fecmodi] : [TIMESTAMP]) - [2025-05-30T10:18:13.678948]
2025-05-30 15:01:09.696 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([usualta] : [VARCHAR]) - [uid:n11111]
2025-05-30 15:01:09.697 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([usumodi] : [VARCHAR]) - [uid:n11111]
2025-05-30 15:01:09.697 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([entity] : [VARCHAR]) - [0049]
2025-05-30 15:01:09.697 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([expedient_id] : [BIGINT]) - [null]
2025-05-30 15:01:09.697 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([indicator_sscc] : [VARCHAR]) - [N]
2025-05-30 15:01:09.697 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([origin] : [VARCHAR]) - [TRADE]
2025-05-30 15:01:09.697 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([origin_id] : [BIGINT]) - [123450]
2025-05-30 15:01:09.697 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([product_id] : [VARCHAR]) - [FW]
2025-05-30 15:01:09.697 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([signature_type] : [VARCHAR]) - [DIGITAL]
2025-05-30 15:01:09.697 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([validated_bo] : [VARCHAR]) - [null]
2025-05-30 15:01:09.697 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([trade_signature_id] : [BIGINT]) - [29]
2025-05-30 15:01:09.697 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([fecalta] : [TIMESTAMP]) - [2025-05-30T10:46:52.059540]
2025-05-30 15:01:09.698 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([fecmodi] : [TIMESTAMP]) - [2025-05-30T10:46:52.059540]
2025-05-30 15:01:09.698 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([usualta] : [VARCHAR]) - [uid:n11111]
2025-05-30 15:01:09.698 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([usumodi] : [VARCHAR]) - [uid:n11111]
2025-05-30 15:01:09.698 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([entity] : [VARCHAR]) - [0049]
2025-05-30 15:01:09.698 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([expedient_id] : [BIGINT]) - [null]
2025-05-30 15:01:09.698 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([indicator_sscc] : [VARCHAR]) - [N]
2025-05-30 15:01:09.698 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([origin] : [VARCHAR]) - [TRADE]
2025-05-30 15:01:09.698 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([origin_id] : [BIGINT]) - [123450]
2025-05-30 15:01:09.698 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([product_id] : [VARCHAR]) - [FW]
2025-05-30 15:01:09.698 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([signature_type] : [VARCHAR]) - [DIGITAL]
2025-05-30 15:01:09.698 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([validated_bo] : [VARCHAR]) - [null]
2025-05-30 15:01:09.698 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([trade_signature_id] : [BIGINT]) - [31]
2025-05-30 15:01:09.699 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([fecalta] : [TIMESTAMP]) - [2025-05-30T10:56:10.267359]
2025-05-30 15:01:09.699 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([fecmodi] : [TIMESTAMP]) - [2025-05-30T10:56:10.267359]
2025-05-30 15:01:09.699 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([usualta] : [VARCHAR]) - [uid:n11111]
2025-05-30 15:01:09.699 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([usumodi] : [VARCHAR]) - [uid:n11111]
2025-05-30 15:01:09.699 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([entity] : [VARCHAR]) - [0049]
2025-05-30 15:01:09.699 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([expedient_id] : [BIGINT]) - [null]
2025-05-30 15:01:09.699 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([indicator_sscc] : [VARCHAR]) - [N]
2025-05-30 15:01:09.699 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([origin] : [VARCHAR]) - [TRADE]
2025-05-30 15:01:09.699 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([origin_id] : [BIGINT]) - [123450]
2025-05-30 15:01:09.699 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([product_id] : [VARCHAR]) - [FW]
2025-05-30 15:01:09.699 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([signature_type] : [VARCHAR]) - [DIGITAL]
2025-05-30 15:01:09.699 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([validated_bo] : [VARCHAR]) - [null]
2025-05-30 15:01:09.699 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] org.hibernate.type.CollectionType        : Created collection wrapper: [com.acelera.fx.db.infrastructure.adapter.persistence.jpa.model.TradeSignatureModel.tradeSignerList#26]
2025-05-30 15:01:09.699 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] org.hibernate.type.CollectionType        : Created collection wrapper: [com.acelera.fx.db.infrastructure.adapter.persistence.jpa.model.TradeSignatureModel.tradeSignerList#28]
2025-05-30 15:01:09.700 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] org.hibernate.type.CollectionType        : Created collection wrapper: [com.acelera.fx.db.infrastructure.adapter.persistence.jpa.model.TradeSignatureModel.tradeSignerList#30]
2025-05-30 15:01:09.700 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] org.hibernate.type.CollectionType        : Created collection wrapper: [com.acelera.fx.db.infrastructure.adapter.persistence.jpa.model.TradeSignatureModel.tradeSignerList#27]
2025-05-30 15:01:09.700 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] org.hibernate.type.CollectionType        : Created collection wrapper: [com.acelera.fx.db.infrastructure.adapter.persistence.jpa.model.TradeSignatureModel.tradeSignerList#29]
2025-05-30 15:01:09.700 TRACE [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] org.hibernate.type.CollectionType        : Created collection wrapper: [com.acelera.fx.db.infrastructure.adapter.persistence.jpa.model.TradeSignatureModel.tradeSignerList#31]
2025-05-30 15:01:09.701 ERROR [conac-springboot-fx-db,3cf4672da345f629,b91e281deed6a943] 4508 --- [oundedElastic-2] o.s.m.h.i.reactive.InvocableHelper       : No exception handling method

org.springframework.dao.IncorrectResultSizeDataAccessException: query did not return a unique result: 6; nested exception is javax.persistence.NonUniqueResultException: query did not return a unique result: 6


                    